<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        /* internal style */
        .error 
        {
            background-color:bisque;
            color:red;
            font-weight: bold;
            font-size: 16px;
            border:2px solid red;
        }
        .no-error
        {
            background-color:white;
            color:white;
            font-size: 0px;
            border:1px solid black;
        }
    </style>
</head>
<body>
    <form action="success.html" method="post" onsubmit="return GenerateTable();" >
        <table align="center" border="2" cellpadding="10" width="70%">
            <tr>
                <td colspan="3" align="center">
                    <h3>HTML table generator</h3>
                </td>
            </tr>
            <tr>
                <td width="20%">Enter row</td>
                <td width="30%">
                    <input type="text" name="tablerow" id="tablerow" onblur="Validate(this.id);" class="mynumber" data-error-empty="row can not be empty"  data-error-number="row must be only digits" >
                </td>
                <td class="no-error" id="td_tablerow">

                </td>
            </tr>
            <tr>
                <td>Enter Column</td>
                <td>
                    <input type="text" name="tablecolumn" id="tablecolumn" onblur="Validate(this.id);" class="mynumber" data-error-empty="column can not be empty"   data-error-number="column must be only digits">
                </td>
                <td class="no-error" id="td_tablecolumn">
                   
                </td>
            </tr>
            <tr>
                <td>Select loop</td>
                <td>
                    <select id="loop">
                        <option value="1">While loop</option>
                        <option value="2">For loop</option>
                        <option value="3">Do while loop</option>
                    </select>
                </td>
                <td></td>
            </tr>
            <tr>
                <td colspan="3" align="center">
                    <input type="submit" value="Generate HTML table">
                </td>
            </tr>
        </table>

        <div id="mydiv"><h3>here we will display table</h3></div>
    </form>
    <script>
        //arrow function 
        let $ = (ControlId) => document.getElementById(ControlId);
        
        //variables declaration 
        var tablerow = $("tablerow");
        var tablecolumn = $("tablecolumn");
        var loop = $("loop");
        var mydiv = $("mydiv");
        function isInt(str)
        {
            let isnum = /^\d+$/.test(str);
            return isnum
        }

        let ValidateInputAtSubmit = function()
        {
            let inputs = document.getElementsByClassName("mynumber");
            for (let index = 0; index < inputs.length; index++) {
               if(inputs[index].value=="")
               {
                    alert(inputs[index].getAttribute("data-error-empty"));
                    inputs[index].focus();
                    return false
               }
               if(isInt(inputs[index].value)==false)
               {
                    alert(inputs[index].getAttribute("data-error-number"));
                    inputs[index].focus();
                    return false
               }
            }
            return true;
        }
        
        let Validate = function(ControlId){
            console.log(ControlId);
            var errortd= "td_" + ControlId;
            console.log(errortd);
            if($(ControlId).value=='')
            {
                // console.log(ControlId + ' is empty empty');
                $(errortd).className = "error";
                $(errortd).innerHTML = "value is required";
            }
            else if(isInt($(ControlId).value)==false)
            {
                // console.log(ControlId + ' is empty empty');
                $(errortd).className = "error";
                $(errortd).innerHTML = "only digits is allowed";
            }
            // else if(document.getElementById(ControlId))
            else 
            {
                // console.log(ControlId + ' has value');
                $(errortd).className = "no-error";
            }
        }
        //user defined function(2nd method)
        let StartTable = function(){
            return "<table border='2' align='center' cellpadding='10' width='80%'>";
        }
        let EndTable = function(){
            return "</table>";
        }
        let GenerateTable = function(){
            //input validation 
            // if(tablerow.value=="")
            // {
            //     alert("row can not be empty");
            //     tablerow.focus();
            //     return false;
            // }
            // else if(tablecolumn.value=="")
            // {
            //     alert("column can not be empty");
            //     tablecolumn.focus();
            //     return false;
            // }
            // else if(isInt(tablerow.value)==false)
            // {
            //     alert("row must contain only digits");
            //     tablerow.focus();
            //     return false;
            // }
            // else if(isInt(tablecolumn.value)==false)
            // {
            //     alert("column must contain only digits");
            //     tablerow.focus();
            //     return false;
            // }
            ValidateInputAtSubmit();
            var output;
            if (loop.value==1)
            {
                output = StartTable();
                var row=1;

                while(row<=parseInt(tablerow.value))
                {
                    output += "<tr>";
                    var column = 1;
                    while(column<=parseInt(tablecolumn.value))
                    {
                        output += "<td>The easylearn academy</td>";  
                        column++;
                    }  
                    output += "</tr>";
                    row++;
                }
                

                output+= EndTable();
            }
            
            if(loop.value==2)
            {
                output = StartTable();
                for(row=1;row<=parseInt(tablerow.value);row++)
                {
                    output += "<tr>";
                    for(var column=1;column<=parseInt(tablecolumn.value);column++)    
                    {
                        output += `<td>${column}</td>`;
                    }
                    output += "</tr>";
                }
                output += EndTable();
            }
        if(loop.value==3)
        {
            output = StartTable();
            output += "<tr>";
            var row = 1;
            do 
            {
                var column=1;
                do 
                {
                    output += "<td>meet</td>";
                    column=column+1;
                }while(column<=parseInt(tablecolumn.value));
                output += "</tr>";
                row = row + 1;
            }while(row<=parseInt(tablerow.value));

            

            output += EndTable(); 
        }   
            mydiv.innerHTML = output
            return false;
        }
    </script>
</body>
</html>